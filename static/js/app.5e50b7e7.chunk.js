(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{169:function(e,t,r){"use strict";r.d(t,"a",(function(){return Xe}));var n=r(67),o=r(170),a=r(0),i=r.n(a),c=r(252),s=r(1),u=r.n(s),l=r(11),h=r.n(l),f=r(12),p=r.n(f),d=r(249),v=r(250),m=r(116);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=r(172);function E(){return Object(g.a)()}var O=r(245),k=r(246),P=r(95),x=r(247),j=r(2),S=r(33),w=r(159),R=r(3);function T(e){var t=e.navigation;return a.createElement(R.a,{style:A.container},a.createElement(S.a,{style:A.title},"This screen doesn't exist."),a.createElement(w.a,{onPress:function(){return t.replace("Root")},style:A.link},a.createElement(S.a,{style:A.linkText},"Go to home screen!")))}var A=j.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),I=r(43),C=r.n(I),N=r(248),U={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff"}},J=r(10),D=r.n(J),B=r(13),$=r.n(B);function G(e){if(!e)return"";switch(e){case"RUB":return"\u20bd";case"USD":return"$";case"EUR":return"\u20ac";case"GBP":return"\xa3";case"TRY":return"\u20ba";case"CHF":return"\u20a3";case"JPY":return"\xa5";case"CNY":return"\u5143";default:return e}}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(null==e||void 0==e||isNaN(e))return"";var o=r&&e>0?"+":"",a=e.toFixed(n).split("."),i=a.length>1?"."+a[1]:"";return""+o+a[0].replace(/\B(?=(\d{3})+(?!\d))/g," ")+i+" "+G(t)}var L=function(){function e(t,r){var n,o,a,i,c,s;D()(this,e),this.ticker=r.ticker||r.figi,this.name=r.name,this.figi=r.figi,this.isin=r.isin||r.figi,this.instrumentType=r.instrumentType,this.currency=(null==(n=r.averagePositionPrice)?void 0:n.currency)||(null==(o=r.expectedYield)?void 0:o.currency),this.count=r.balance,this.average=null==(a=r.averagePositionPrice)?void 0:a.value,this.expected=null==(i=r.expectedYield)?void 0:i.value,this.fixedPnL=void 0,this.lastPrice=r.expectedYield&&r.averagePositionPrice?(null==(c=r.expectedYield)?void 0:c.value)/r.balance+(null==(s=r.averagePositionPrice)?void 0:s.value):void 0,this.lastPriceUpdated=new Date,this.portfolioId=t,this.calculatedAverage=void 0,this.calculatedCount=void 0,this.calculatedExpected=void 0,this.previousDayPrice=void 0,this.orders=[],this.isFavourite=!1}return $()(e,[{key:"priceChange",get:function(){return 0}},{key:"cost",get:function(){return void 0!=this.lastPrice?this.lastPrice*this.count:void 0}},{key:"expectedValue",get:function(){return"Currency"==this.instrumentType?this.expected:this.lastPrice&&this.average?(this.lastPrice-this.average)*(null!=(e=this.calculatedCount)?e:this.count):this.expected;var e}},{key:"currencySymbol",get:function(){return G(this.currency)}},{key:"printTitle",value:function(){switch(this.instrumentType){case"Bond":case"Currency":return this.name;case"Etf":case"Stock":return this.ticker}}},{key:"printPrice",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return F(this.lastPrice,e?this.currencySymbol:"")}},{key:"printPriceChange",value:function(){return F(this.priceChange,"%",!0)}},{key:"printAveragePrice",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return F(this.average,e?this.currencySymbol:"")}},{key:"printQuantity",value:function(){var e,t;return"Currency"==this.instrumentType?F(null!=(t=this.calculatedCount)?t:this.count):(null!=(e=this.calculatedCount)?e:this.count).toFixed(0)}},{key:"printCost",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return F(this.cost,e?this.currencySymbol:"")}},{key:"printExpected",value:function(){var e,t,r=100*(null!=(e=this.expected)?e:0)/(null!=(t=this.cost)?t:1);return F(this.expected,this.currencySymbol,!0)+" ("+F(r,"%")+")"}},{key:"printFixedPnL",value:function(){var e;return F(null!=(e=this.fixedPnL)?e:0,this.currencySymbol)}}]),e}();var z=r(99),H=r(92),Y=r(14),V=r.n(Y),_=r(15),M=r.n(_),Q=r(5),W=r.n(Q),q=r(62),K=r.n(q);function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W()(e);if(t){var o=W()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return M()(this,r)}}!function(){function e(t,r){D()(this,e),this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=void 0!==t&&null!==t?t:"https://api-invest.tinkoff.ru/openapi/"}$()(e,[{key:"register",value:function(e,t){var r=this,n=this.baseUrl+"/sandbox/register";n=n.replace(/[?&]$/,"");var o={body:JSON.stringify(e),method:"POST",signal:t,headers:{"Content-Type":"application/json",Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processRegister(e)}))}},{key:"processRegister",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"balance",value:function(e,t,r){var n=this,o=this.baseUrl+"/sandbox/currencies/balance?";if(null===t)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==t&&(o+="brokerAccountId="+encodeURIComponent(""+t)+"&"),o=o.replace(/[?&]$/,"");var a={body:JSON.stringify(e),method:"POST",signal:r,headers:{"Content-Type":"application/json",Accept:"application/json"}};return this.http.fetch(o,a).then((function(e){return n.processBalance(e)}))}},{key:"processBalance",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"balance2",value:function(e,t,r){var n=this,o=this.baseUrl+"/sandbox/positions/balance?";if(null===t)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==t&&(o+="brokerAccountId="+encodeURIComponent(""+t)+"&"),o=o.replace(/[?&]$/,"");var a={body:JSON.stringify(e),method:"POST",signal:r,headers:{"Content-Type":"application/json",Accept:"application/json"}};return this.http.fetch(o,a).then((function(e){return n.processBalance2(e)}))}},{key:"processBalance2",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"remove",value:function(e,t){var r=this,n=this.baseUrl+"/sandbox/remove?";if(null===e)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==e&&(n+="brokerAccountId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");var o={method:"POST",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processRemove(e)}))}},{key:"processRemove",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"clear",value:function(e,t){var r=this,n=this.baseUrl+"/sandbox/clear?";if(null===e)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==e&&(n+="brokerAccountId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");var o={method:"POST",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processClear(e)}))}},{key:"processClear",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}}])}();var Z=function(){function e(t,r){D()(this,e),this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=void 0!==t&&null!==t?t:"https://api-invest.tinkoff.ru/openapi/"}return $()(e,[{key:"orders",value:function(e,t){var r=this,n=this.baseUrl+"/orders?";if(null===e)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==e&&(n+="brokerAccountId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");var o={method:"GET",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processOrders(e)}))}},{key:"processOrders",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"limitOrder",value:function(e,t,r,n){var o=this,a=this.baseUrl+"/orders/limit-order?";if(void 0===e||null===e)throw new Error("The parameter 'figi' must be defined and cannot be null.");if(a+="figi="+encodeURIComponent(""+e)+"&",null===r)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==r&&(a+="brokerAccountId="+encodeURIComponent(""+r)+"&"),a=a.replace(/[?&]$/,"");var i={body:JSON.stringify(t),method:"POST",signal:n,headers:{"Content-Type":"application/json",Accept:"application/json"}};return this.http.fetch(a,i).then((function(e){return o.processLimitOrder(e)}))}},{key:"processLimitOrder",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"marketOrder",value:function(e,t,r,n){var o=this,a=this.baseUrl+"/orders/market-order?";if(void 0===e||null===e)throw new Error("The parameter 'figi' must be defined and cannot be null.");if(a+="figi="+encodeURIComponent(""+e)+"&",null===r)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==r&&(a+="brokerAccountId="+encodeURIComponent(""+r)+"&"),a=a.replace(/[?&]$/,"");var i={body:JSON.stringify(t),method:"POST",signal:n,headers:{"Content-Type":"application/json",Accept:"application/json"}};return this.http.fetch(a,i).then((function(e){return o.processMarketOrder(e)}))}},{key:"processMarketOrder",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"cancel",value:function(e,t,r){var n=this,o=this.baseUrl+"/orders/cancel?";if(void 0===e||null===e)throw new Error("The parameter 'orderId' must be defined and cannot be null.");if(o+="orderId="+encodeURIComponent(""+e)+"&",null===t)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==t&&(o+="brokerAccountId="+encodeURIComponent(""+t)+"&"),o=o.replace(/[?&]$/,"");var a={method:"POST",signal:r,headers:{Accept:"application/json"}};return this.http.fetch(o,a).then((function(e){return n.processCancel(e)}))}},{key:"processCancel",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}}]),e}(),ee=function(){function e(t,r){D()(this,e),this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=void 0!==t&&null!==t?t:"https://api-invest.tinkoff.ru/openapi/"}return $()(e,[{key:"operations",value:function(e,t,r,n,o){var a=this,i=this.baseUrl+"/operations?";if(void 0===e||null===e)throw new Error("The parameter 'from' must be defined and cannot be null.");if(i+="from="+encodeURIComponent(""+e)+"&",void 0===t||null===t)throw new Error("The parameter 'to' must be defined and cannot be null.");if(i+="to="+encodeURIComponent(""+t)+"&",null===r)throw new Error("The parameter 'figi' cannot be null.");if(void 0!==r&&(i+="figi="+encodeURIComponent(""+r)+"&"),null===n)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==n&&(i+="brokerAccountId="+encodeURIComponent(""+n)+"&"),i=i.replace(/[?&]$/,"");var c={method:"GET",signal:o,headers:{Accept:"application/json"}};return this.http.fetch(i,c).then((function(e){return a.processOperations(e)}))}},{key:"processOperations",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0411\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}}]),e}(),te=function(){function e(t,r){D()(this,e),this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=void 0!==t&&null!==t?t:"https://api-invest.tinkoff.ru/openapi/"}return $()(e,[{key:"portfolio",value:function(e,t){var r=this,n=this.baseUrl+"/portfolio?";if(null===e)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==e&&(n+="brokerAccountId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");var o={method:"GET",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processPortfolio(e)}))}},{key:"processPortfolio",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0411\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"currencies",value:function(e,t){var r=this,n=this.baseUrl+"/portfolio/currencies?";if(null===e)throw new Error("The parameter 'brokerAccountId' cannot be null.");void 0!==e&&(n+="brokerAccountId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");var o={method:"GET",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processCurrencies(e)}))}},{key:"processCurrencies",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0411\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}}]),e}(),re=function(){function e(t,r){D()(this,e),this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=void 0!==t&&null!==t?t:"https://api-invest.tinkoff.ru/openapi/"}return $()(e,[{key:"accounts",value:function(e){var t=this,r=this.baseUrl+"/user/accounts";r=r.replace(/[?&]$/,"");var n={method:"GET",signal:e,headers:{Accept:"application/json"}};return this.http.fetch(r,n).then((function(e){return t.processAccounts(e)}))}},{key:"processAccounts",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0411\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}}]),e}(),ne=function(){function e(t,r){D()(this,e),this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=void 0!==t&&null!==t?t:"https://api-invest.tinkoff.ru/openapi/"}return $()(e,[{key:"stocks",value:function(e){var t=this,r=this.baseUrl+"/market/stocks";r=r.replace(/[?&]$/,"");var n={method:"GET",signal:e,headers:{Accept:"application/json"}};return this.http.fetch(r,n).then((function(e){return t.processStocks(e)}))}},{key:"processStocks",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"bonds",value:function(e){var t=this,r=this.baseUrl+"/market/bonds";r=r.replace(/[?&]$/,"");var n={method:"GET",signal:e,headers:{Accept:"application/json"}};return this.http.fetch(r,n).then((function(e){return t.processBonds(e)}))}},{key:"processBonds",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"etfs",value:function(e){var t=this,r=this.baseUrl+"/market/etfs";r=r.replace(/[?&]$/,"");var n={method:"GET",signal:e,headers:{Accept:"application/json"}};return this.http.fetch(r,n).then((function(e){return t.processEtfs(e)}))}},{key:"processEtfs",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"currencies2",value:function(e){var t=this,r=this.baseUrl+"/market/currencies";r=r.replace(/[?&]$/,"");var n={method:"GET",signal:e,headers:{Accept:"application/json"}};return this.http.fetch(r,n).then((function(e){return t.processCurrencies2(e)}))}},{key:"processCurrencies2",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"orderbook",value:function(e,t,r){var n=this,o=this.baseUrl+"/market/orderbook?";if(void 0===e||null===e)throw new Error("The parameter 'figi' must be defined and cannot be null.");if(o+="figi="+encodeURIComponent(""+e)+"&",void 0===t||null===t)throw new Error("The parameter 'depth' must be defined and cannot be null.");o=(o+="depth="+encodeURIComponent(""+t)+"&").replace(/[?&]$/,"");var a={method:"GET",signal:r,headers:{Accept:"application/json"}};return this.http.fetch(o,a).then((function(e){return n.processOrderbook(e)}))}},{key:"processOrderbook",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"candles",value:function(e,t,r,n,o){var a=this,i=this.baseUrl+"/market/candles?";if(void 0===e||null===e)throw new Error("The parameter 'figi' must be defined and cannot be null.");if(i+="figi="+encodeURIComponent(""+e)+"&",void 0===t||null===t)throw new Error("The parameter 'from' must be defined and cannot be null.");if(i+="from="+encodeURIComponent(""+t)+"&",void 0===r||null===r)throw new Error("The parameter 'to' must be defined and cannot be null.");if(i+="to="+encodeURIComponent(""+r)+"&",void 0===n||null===n)throw new Error("The parameter 'interval' must be defined and cannot be null.");i=(i+="interval="+encodeURIComponent(""+n)+"&").replace(/[?&]$/,"");var c={method:"GET",signal:o,headers:{Accept:"application/json"}};return this.http.fetch(i,c).then((function(e){return a.processCandles(e)}))}},{key:"processCandles",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"byFigi",value:function(e,t){var r=this,n=this.baseUrl+"/market/search/by-figi?";if(void 0===e||null===e)throw new Error("The parameter 'figi' must be defined and cannot be null.");n=(n+="figi="+encodeURIComponent(""+e)+"&").replace(/[?&]$/,"");var o={method:"GET",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processByFigi(e)}))}},{key:"processByFigi",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}},{key:"byTicker",value:function(e,t){var r=this,n=this.baseUrl+"/market/search/by-ticker?";if(void 0===e||null===e)throw new Error("The parameter 'ticker' must be defined and cannot be null.");n=(n+="ticker="+encodeURIComponent(""+e)+"&").replace(/[?&]$/,"");var o={method:"GET",signal:t,headers:{Accept:"application/json"}};return this.http.fetch(n,o).then((function(e){return r.processByTicker(e)}))}},{key:"processByTicker",value:function(e){var t=this,r=e.status,n={};return e.headers&&e.headers.forEach&&e.headers.forEach((function(e,t){return n[t]=e})),200===r?e.text().then((function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)})):500===r?e.text().then((function(e){var o;return o=""===e?null:JSON.parse(e,t.jsonParseReviver),ae("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r,e,n,o)})):200!==r&&204!==r?e.text().then((function(e){return ae("An unexpected server error occurred.",r,e,n)})):Promise.resolve(null)}}]),e}(),oe=function(e){V()(r,e);var t=X(r);function r(e,n,o,a,i){var c;return D()(this,r),(c=t.call(this)).isApiException=!0,c.message=e,c.status=n,c.response=o,c.headers=a,c.result=i,c}return $()(r,null,[{key:"isApiException",value:function(e){return!0===e.isApiException}}]),r}(K()(Error));function ae(e,t,r,n,o){throw null!==o&&void 0!==o?o:new oe(e,t,r,n,null)}var ie=function(e,t){return function(e,t){return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter((function(r){var n=e[r];return!(!(n instanceof Function)||n===t)}))}(e,t).forEach((function(t){e[t]=e[t].bind(e)})),e};function ce(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),r)}))])}var se=r(117);function ue(){return{storeData:function(e,t){var r;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=JSON.stringify(t),n.next=4,p.a.awrap(se.a.setItem(e,r));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),null,null,[[0,6]],Promise)},getData:function(e){var t;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.awrap(se.a.getItem(e));case 3:return t=r.sent,r.abrupt("return",null!=t?JSON.parse(t):null);case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),null,null,[[0,7]],Promise)}}}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe={};function pe(){var e=Object(a.useState)(fe),t=h()(e,2),r=t[0],n=t[1],o=ue(),i=o.getData,c=o.storeData;return Object(a.useEffect)((function(){i("@TTE_Settings").then((function(e){null!=e&&n(e)}))}),[]),{settings:r,setSettings:function(e){var t=he(he({},r),e);n(t),c("@TTE_Settings",t)},resetSettings:function(){n(fe),c("@TTE_Settings",fe)}}}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me={fetch:function(e,t){var r,n,o,a,i;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(r=ue(),n=r.getData,void 0===t){c.next=7;break}return c.next=4,p.a.awrap(n("@TTE_Settings"));case 4:o=c.sent,(a=null==o?void 0:o.token)&&(t.headers=ve(ve({},null!=(i=t.headers)?i:{}),{},{Authorization:"Bearer "+a}));case 7:return c.abrupt("return",ce(e,t));case 8:case"end":return c.stop()}}),null,null,null,Promise)}},be="https://api-invest.tinkoff.ru/openapi",ye=(ie(new Z(be,me),Z),ie(new ne(be,me),ne),ie(new te(be,me),te)),ge=(ie(new ee(be,me),ee),ie(new re(be,me),re));var Ee=r(9),Oe=r.n(Ee),ke=["style","lightColor","darkColor"],Pe=["style","lightColor","darkColor"];function xe(e,t){var r=E(),n=e[r];return n||U[r][t]}function je(e){var t=e.style,r=e.lightColor,n=e.darkColor,o=Oe()(e,ke),i=xe({light:r,dark:n},"text");return a.createElement(S.a,C()({style:[{color:i},t]},o))}function Se(e){var t=e.style,r=e.lightColor,n=e.darkColor,o=Oe()(e,Pe),i=xe({light:r,dark:n},"background");return a.createElement(R.a,C()({style:[{backgroundColor:i},t]},o))}function we(e){var t=e.title,r=e.children,n=i.a.Children.map(r,(function(e,t){return i.a.cloneElement(e,{isFirst:0==t,isLast:!Array.isArray(r)||t==r.length-1})}));return i.a.createElement(Se,{style:Re.container},i.a.createElement(je,{style:Re.title},t),i.a.createElement(Se,{style:Re.group},n))}var Re=j.a.create({container:{backgroundColor:"transparent",paddingHorizontal:20,paddingTop:20},title:{opacity:.4,marginBottom:10,textTransform:"uppercase",fontSize:12},group:{borderRadius:10}});function Te(){var e,t=pe().settings,r=function(e){var t=e.initial,r=e.fetchData,n=e.initialLoading,o=void 0===n||n,i=Object(a.useRef)(t),c=Object(a.useState)(t),s=h()(c,2),u=s[0],l=s[1],f=Object(a.useRef)(!1),p=Object(a.useState)(0),d=h()(p,2),v=d[0],m=d[1],b=Object(a.useState)(null),y=h()(b,2),g=y[0],E=y[1],O=Object(a.useCallback)((function(){return f.current=!0,m((function(e){return e+1})),E(null),r.apply(void 0,arguments).then((function(e){return l(e),e}),(function(e){throw E(e),e})).finally((function(){m((function(e){return e-1}))}))}),[r]),k=Object(a.useCallback)((function(e){return function(){m((function(e){return e+1})),E(null),e(r.apply(void 0,arguments),l,E).finally((function(){return m((function(e){return e-1}))}))}}),[r]),P=Object(a.useCallback)((function(){l(i.current),E(null)}),[]);return{data:u,loading:f.current?v>0:o,firstFetchDone:f.current,error:g,fetch:O,fetchMore:k,resetData:P,setData:l}}({initial:{},fetchData:ye.portfolio}),n=(r.loading,r.data),o=r.fetch;Object(a.useEffect)((function(){var e;t&&o(null==(e=t.account)?void 0:e.brokerAccountId)}),[o,t]);var i=null==n||null==(e=n.payload)?void 0:e.positions.reduce((function(e,t){return(e[t.instrumentType]=e[t.instrumentType]||[]).push(t),e}),{}),c=Object.entries(null!=i?i:{}).map((function(e){var t=h()(e,2);return{title:t[0],data:t[1].map((function(e){return new L("TODO_portfolioID",e)}))}}));return a.createElement(z.a,{sections:c,keyExtractor:function(e){return e.figi},renderItem:function(e){var t,r=e.item,n=e.separators;return a.createElement(H.a,{key:r.figi,onPress:function(){},onShowUnderlay:n.highlight,onHideUnderlay:n.unhighlight},a.createElement(Se,{style:Ae.listItem},a.createElement(Se,{style:Ae.itemImage},a.createElement(je,{style:Ae.itemImageLetter},null==(t=r.ticker)?void 0:t.slice(0,1))),a.createElement(Se,{style:Ae.itemInfo},a.createElement(Se,null,a.createElement(je,null,r.printTitle()),a.createElement(je,null,r.printQuantity()+" \u2022 "+r.printAveragePrice(!1)+" \u2192 "+r.printPrice())),a.createElement(Se,{style:Ae.itemRight},a.createElement(je,null,r.printCost()),a.createElement(je,null,r.printExpected())))))},ItemSeparatorComponent:function(){return a.createElement(Se,{style:Ae.separator})},renderSectionHeader:function(e){var t=e.section.title;return a.createElement(we,{title:t})}})}var Ae=j.a.create({container:{},listItem:{display:"flex",alignItems:"center",flexDirection:"row",paddingVertical:10,paddingHorizontal:15},itemImage:{width:40,height:40,borderRadius:20,backgroundColor:"blue",display:"flex",alignItems:"center",justifyContent:"center"},itemImageLetter:{color:"white",fontSize:18},itemInfo:{marginLeft:10,flexGrow:1,display:"flex",flexDirection:"row",justifyContent:"space-between"},itemRight:{display:"flex",alignItems:"flex-end"},separator:{backgroundColor:"#d3d3d3",height:1}}),Ie=r(27);function Ce(){var e=Object(Ie.o)().navigate,t=pe(),r=t.settings,o=t.setSettings,c=Object(a.useState)([]),s=h()(c,2),u=s[0],l=s[1];Object(a.useEffect)((function(){r.token&&ge.accounts().then((function(e){l(e.payload.accounts)})).catch((function(e){return console.log(e)}))}),[r.token]);return i.a.createElement(n.a,{data:u,keyExtractor:function(e){return e.brokerAccountId},ItemSeparatorComponent:function(){return i.a.createElement(Se,{style:Ne.separator})},renderItem:function(t){var r=t.item,n=t.separators;return i.a.createElement(H.a,{key:r.brokerAccountId,onPress:function(){return o({account:r}),void e("SettingsScreen")},onShowUnderlay:n.highlight,onHideUnderlay:n.unhighlight},i.a.createElement(Se,null,i.a.createElement(je,{style:Ne.listItem},r.brokerAccountType," ",r.brokerAccountId)))}})}var Ne=j.a.create({separator:{height:1,backgroundColor:"#d3d3d3"},listItem:{paddingHorizontal:15,paddingVertical:10}}),Ue=r(251),Je=r(8);function De(e){var t,r=e.children,n=(e.isFirst,e.isLast),o=i.a.cloneElement(r,{style:[{paddingHorizontal:15,paddingVertical:10},null==r||null==(t=r.props)?void 0:t.style]});return i.a.createElement(i.a.Fragment,null,o,!n&&i.a.createElement(Se,{style:Be.divider}))}var Be=j.a.create({divider:{height:1,width:"100%",opacity:.15,backgroundColor:"gray"}});function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(){var e,t=pe(),r=t.settings,o=t.setSettings;return a.createElement(n.b,null,a.createElement(we,{title:"Security"},a.createElement(De,null,a.createElement(n.c,{placeholder:"Token",style:Fe.textInput,value:null!=(e=r.token)?e:"",onChangeText:function(e){return o({token:e})}}))),a.createElement(we,{title:"Portfolio"},a.createElement(De,null,a.createElement(Ue.a,{to:{screen:"SelectAccountScreen"}},r.account?r.account.brokerAccountType+" "+r.account.brokerAccountId:"Select account"))),a.createElement(we,{title:"Positions"},a.createElement(De,null,a.createElement(je,null,"TODO")),a.createElement(De,null,a.createElement(je,null,"TODO")),a.createElement(De,null,a.createElement(je,null,"TODO"))))}var Fe=j.a.create({textInput:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({borderRadius:10},Je.a.select({web:{outlineStyle:"none"}}))}),Le=Object(N.a)();function ze(){var e=E();return a.createElement(Le.Navigator,{initialRouteName:"Settings",screenOptions:{headerShown:!1,tabBarActiveTintColor:U[e].tint}},a.createElement(Le.Screen,{name:"Portfolio",component:Ve,options:{tabBarIcon:function(e){var t=e.color;return a.createElement(He,{name:"list-outline",color:t})}}}),a.createElement(Le.Screen,{name:"Settings",component:Me,options:{tabBarIcon:function(e){var t=e.color;return a.createElement(He,{name:"settings-outline",color:t})}}}))}function He(e){return a.createElement(d.a,C()({size:30,style:{marginBottom:-3}},e))}var Ye=Object(x.a)();function Ve(){return a.createElement(Ye.Navigator,null,a.createElement(Ye.Screen,{name:"PortfolioScreen",component:Te,options:{headerTitle:"Portfolio",title:"Portfolio"}}))}var _e=Object(x.a)();function Me(){return a.createElement(_e.Navigator,null,a.createElement(_e.Screen,{name:"SettingsScreen",component:Ge,options:{headerTitle:"Settings",title:"Settings"}}),a.createElement(_e.Screen,{name:"SelectAccountScreen",component:Ce,options:{headerTitle:"Select account",title:"Select account"}}))}var Qe={prefixes:[r(171).a("/")],config:{screens:{Root:{screens:{Portfolio:{screens:{PortfolioScreen:"portfolio"}},Settings:{screens:{SettingsScreen:"settings",SelectAccountScreen:"settings/account"}}}},NotFound:"*"}}};function We(e){var t=e.colorScheme;return a.createElement(O.a,{linking:Qe,theme:"dark"===t?k.a:P.a},a.createElement(Ke,null))}var qe=Object(x.a)();function Ke(){return a.createElement(qe.Navigator,{screenOptions:{headerShown:!1}},a.createElement(qe.Screen,{name:"Root",component:ze}),a.createElement(qe.Screen,{name:"NotFound",component:T,options:{title:"Oops!"}}))}function Xe(){var e=function(){var e=a.useState(!1),t=h()(e,2),n=t[0],o=t[1];return a.useEffect((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m.b(),e.next=4,p.a.awrap(v.b(y(y({},d.a.font),{},{"space-mono":r(209)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),m.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),n}(),t=E();return e?i.a.createElement(c.b,null,i.a.createElement(We,{colorScheme:t}),i.a.createElement(o.a,null)):null}},181:function(e,t,r){e.exports=r(239)},209:function(e,t,r){e.exports=r.p+"./fonts/SpaceMono-Regular.ttf"},233:function(e,t){}},[[181,1,2]]]);
//# sourceMappingURL=app.5e50b7e7.chunk.js.map